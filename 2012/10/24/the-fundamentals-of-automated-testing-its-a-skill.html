<!doctype html>
<!--
  Minimal Mistakes Jekyll Theme 4.19.3 by Michael Rose
  Copyright 2013-2019 Michael Rose - mademistakes.com | @mmistakes
  Free for personal and commercial use under the MIT license
  https://github.com/mmistakes/minimal-mistakes/blob/master/LICENSE
-->
<html lang="en" class="no-js">
  <head>
    <meta charset="utf-8">

<!-- begin _includes/seo.html --><title>The fundamentals of unit testing: It’s a skill - Mark’s Devblog</title>
<meta name="description" content="This post is part of a series on unit testing.">



<meta property="og:type" content="article">
<meta property="og:locale" content="en_GB">
<meta property="og:site_name" content="Mark's Devblog">
<meta property="og:title" content="The fundamentals of unit testing: It’s a skill">
<meta property="og:url" content="https://marksimpson82.github.io/blog/2012/10/24/the-fundamentals-of-automated-testing-its-a-skill.html">


  <meta property="og:description" content="This post is part of a series on unit testing.">







  <meta property="article:published_time" content="2012-10-24T02:00:04+00:00">





  

  


<link rel="canonical" href="https://marksimpson82.github.io/blog/2012/10/24/the-fundamentals-of-automated-testing-its-a-skill.html">




<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    
      "@type": "Person",
      "name": "Mark's Devblog",
      "url": "https://marksimpson82.github.io/blog/"
    
  }
</script>






<!-- end _includes/seo.html -->


<link href="/blog/feed.xml" type="application/atom+xml" rel="alternate" title="Mark's Devblog Feed">

<!-- https://t.co/dKP3o1e -->
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<!-- For all browsers -->
<link rel="stylesheet" href="/blog/assets/css/main.css">

<!--[if IE]>
  <style>
    /* old IE unsupported flexbox fixes */
    .greedy-nav .site-title {
      padding-right: 3em;
    }
    .greedy-nav button {
      position: absolute;
      top: 0;
      right: 0;
      height: 100%;
    }
  </style>
<![endif]-->



    <!-- start custom head snippets -->

<!-- insert favicons. use https://realfavicongenerator.net/ -->

<!-- end custom head snippets -->

  </head>

  <body class="layout--single">
    <nav class="skip-links">
  <h2 class="screen-reader-text">Skip links</h2>
  <ul>
    <li><a href="#site-nav" class="screen-reader-shortcut">Skip to primary navigation</a></li>
    <li><a href="#main" class="screen-reader-shortcut">Skip to content</a></li>
    <li><a href="#footer" class="screen-reader-shortcut">Skip to footer</a></li>
  </ul>
</nav>

    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="https://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->

    

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <nav id="site-nav" class="greedy-nav">
        
        <a class="site-title" href="/blog/">
          Mark's Devblog
          
        </a>
        <ul class="visible-links"></ul>
        
        <button class="greedy-nav__toggle hidden" type="button">
          <span class="visually-hidden">Toggle menu</span>
          <div class="navicon"></div>
        </button>
        <ul class="hidden-links hidden"></ul>
      </nav>
    </div>
  </div>
</div>


    <div class="initial-content">
      



<div id="main" role="main">
  
  <div class="sidebar sticky">
  


<div itemscope itemtype="https://schema.org/Person">

  

  <div class="author__content">
    
      <h3 class="author__name" itemprop="name"></h3>
    
    
  </div>

  <div class="author__urls-wrapper">
    <button class="btn btn--inverse">Follow</button>
    <ul class="author__urls social-icons">
      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      

      <!--
  <li>
    <a href="http://link-to-whatever-social-network.com/user/" itemprop="sameAs" rel="nofollow noopener noreferrer">
      <i class="fas fa-fw" aria-hidden="true"></i> Custom Social Profile Link
    </a>
  </li>
-->
    </ul>
  </div>
</div>

  
  </div>



  <article class="page" itemscope itemtype="https://schema.org/CreativeWork">
    <meta itemprop="headline" content="The fundamentals of unit testing: It’s a skill">
    <meta itemprop="description" content="This post is part of a series on unit testing.">
    <meta itemprop="datePublished" content="2012-10-24T02:00:04+00:00">
    

    <div class="page__inner-wrap">
      
        <header>
          <h1 id="page-title" class="page__title" itemprop="headline">The fundamentals of unit testing: It’s a skill
</h1>
          
            <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  6 minute read

</p>
          
        </header>
      

      <section class="page__content" itemprop="text">
        
        <p>This post is <a href="/blog/2012/10/24/the-fundamentals-of-automated-testing-series.html">part of a series</a> on unit testing.</p>

<p>The first thing I’m writing about is probably the most important. This is a bit of a meandering tale, but it is crucial to understanding the pitfalls of automated testing.</p>

<h2 id="a-cautionary-tale">A Cautionary Tale</h2>

<p>Back in the day at Realtime Worlds (the best part of 5 years ago), when it came to automated testing we were trying to pull ourselves up by our bootstraps. Most people (including myself) didn’t have much of a clue about automated testing. It was a pretty bold move for a games company to try it on a large scale, but it took a very long time for it to pay any benefits. In fact, given the lackadaisical approach and lack of buy-in, it probably had an overall negative effect in the majority of areas.</p>

<p>In my first job fresh out of university, I had the nominal title of Junior Test Engineer. At first, it was our job to try and write extra tests that developers missed, debug failing tests and generally take care of the build. I soon learned to be very cynical.</p>

<p>As you can imagine, it wasn’t very effective (hint: the larger the distance between a person’s actions and the consequences of said actions, the less of an interest they will take). I would characterise it as a baptism of fire. Thanks to spending all day, every day, on automated testing, I acquired a large amount of knowledge by trial and error and learning with my colleagues. That knowledge was eventually ploughed back into the team in a supporting role.</p>

<p>Anyway, when I first joined, it was common to see stuff like this:</p>

<div class="language-c# highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="n">Test</span><span class="p">]</span>  
<span class="k">public</span> <span class="k">void</span> <span class="nf">TestInverse</span><span class="p">()</span>  
<span class="p">{</span>  
  <span class="kt">var</span> <span class="n">m</span> <span class="p">=</span> <span class="n">Matrix</span><span class="p">.</span><span class="n">Identity</span><span class="p">;</span>  

  <span class="n">Assert</span><span class="p">.</span><span class="nf">That</span><span class="p">(</span><span class="n">m</span><span class="p">.</span><span class="nf">Inverse</span><span class="p">(),</span> <span class="n">Is</span><span class="p">.</span><span class="nf">EqualTo</span><span class="p">(</span><span class="n">m</span><span class="p">));</span>  
<span class="p">}</span>
</code></pre></div></div>

<p>.. or worse, this:</p>

<div class="language-c# highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">[</span><span class="n">Test</span><span class="p">]</span>  
<span class="k">public</span> <span class="k">void</span> <span class="nf">Test1</span><span class="p">()</span>
<span class="p">{</span>  
  <span class="kt">var</span> <span class="n">m1</span> <span class="p">=</span> <span class="n">Matrix</span><span class="p">.</span><span class="n">Identity</span><span class="p">;</span>  
  <span class="n">Assert</span><span class="p">.</span><span class="nf">That</span><span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="n">Is</span><span class="p">.</span><span class="n">Not</span><span class="p">.</span><span class="n">Null</span><span class="p">);</span>  
  <span class="kt">var</span> <span class="n">m2</span> <span class="p">=</span> <span class="n">Matrix</span><span class="p">.</span><span class="n">Identity</span><span class="p">;</span>  
  <span class="kt">var</span> <span class="n">m3</span> <span class="p">=</span> <span class="n">Matrix</span><span class="p">.</span><span class="nf">Multiply</span><span class="p">(</span><span class="n">m1</span><span class="p">,</span> <span class="n">m2</span><span class="p">);</span>  
  <span class="n">Assert</span><span class="p">.</span><span class="nf">That</span><span class="p">(</span><span class="n">m3</span><span class="p">,</span> <span class="n">Is</span><span class="p">.</span><span class="nf">EqualTo</span><span class="p">(</span><span class="n">Matrix</span><span class="p">.</span><span class="n">Identity</span><span class="p">));</span>  
  <span class="kt">var</span> <span class="n">m4</span> <span class="p">=</span> <span class="n">m2</span> <span class="p">+</span> <span class="n">m3</span><span class="p">;</span>  
  <span class="n">Assert</span><span class="p">.</span><span class="nf">That</span><span class="p">(</span><span class="n">m4</span><span class="p">,</span> <span class="n">Is</span><span class="p">.</span><span class="nf">EqualTo</span><span class="p">(</span><span class="k">new</span> <span class="nf">Matrix</span><span class="p">(</span> <span class="m">2</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">2</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">));</span>  
  <span class="kt">var</span> <span class="n">m5</span> <span class="p">=</span> <span class="n">m1</span> <span class="p">-</span> <span class="n">m2</span><span class="p">;</span>  
  <span class="n">Assert</span><span class="p">.</span><span class="nf">That</span><span class="p">(</span><span class="n">m5</span><span class="p">,</span> <span class="n">Is</span><span class="p">.</span><span class="nf">EqualTo</span><span class="p">(</span><span class="n">Matrix</span><span class="p">.</span><span class="n">Zero</span><span class="p">));</span>  
<span class="p">}</span>
</code></pre></div></div>

<p>These tests aren’t good. But they were <em>everywhere</em>.</p>

<p>This is not intended as a slight to whoever wrote tests like these because <em>they were all like that.</em> Developers were told to write tests without sufficient guidance, support and – crucially – there were few consequences for writing bad test code, as the testers would scuttle out from their partition, produce a dustpan and broom and proceed to clear up after the developers.</p>

<p>The result was that we had a huge amount of test cases that provided very little value – probably negative value, in fact. The maintenance cost alone was huge. Furthermore, running the main test suite took the best part of 10 minutes with ~6000 tests. It should’ve taken 6 seconds. 20 if I’m being very generous.</p>

<h2 id="templates-of-failure">Templates of Failure</h2>
<p>How did this state of affairs occur? Well, people were asked to write tests, but nobody knew much about it and few people took an active interest.</p>

<p>Person A wrote their feature and attempted to write some tests. After a touch of cursory reading, Person A wrote some tests and bathed in the green glow of the NUnit GUI’s progress bar. However, they didn’t really fully grasp what they were doing and, as time was pressing on, were keen to finish the task and move on to the next one.</p>

<p>Person B – a programmer of similar experience when it came to testing - looked at what Person A had done. “That looks like the done thing!”, they cried while blithely repeating all of Person A’s mistakes and probably throwing in a couple of new ones, too.</p>

<p>This attitude is very common in companies. The first rule of code is that, once it’s checked in, it instantly becomes an order of magnitude harder to modify, correct and improve. Code hardens like concrete. The second rule of code is that other programmers will often use your code for reference, no matter the quality. Time is finite. If a programmer sees code that <em>seems</em> to do the job and it is relevant to the problem they’re trying to solve, it’s fairly common that your shitty code becomes their shitty code. Anti-patterns propagate quickly. One by one, <em>they just started copying it</em>.</p>

<p>What I’m trying to say is that, if shitty code is checked in, it can quickly become the de facto standard – a rigorously applied template of failure. The more alien the topic is, the more likely a developer is to engage in such behaviour.</p>

<h2 id="slow-down-and-think">Slow down and think!</h2>
<p>The reason I am saying this is that, at Realtime Worlds, the worst style of test code was the most prevalent, oft-aped and blindly repeated. People wanted to get their features in and understood neither the value nor the pitfalls of automated testing, as they received insufficient training or had no interest in it. Developers didn’t stop to think about what automated testing <em>is</em> or what it’s <em>for</em>. We had thousands upon thousands of lines of largely worthless code that had to be maintained. It took a long time to change things.</p>

<p>In the examples I gave, neither of those tests is useful. They prove very little, they’re hard to understand and difficult to maintain. The class under test is a mathematical one, too! Matrices have no dependencies. It doesn’t get much simpler than testing classes that have no dependencies.</p>

<h2 id="automated-testing-is-a-skill">Automated Testing is a Skill</h2>
<p>The key is to change how you think about testing. Testing is just like any other aspect of programming – if you want to reap the reward, you need to put in the effort to build up your skills. It’s a gradual ramp from “derp, I know nothing” up to the finer points of test data builders, different testing styles and whatnot.</p>

<p>It’s not just a case of including a framework, clattering out a few test methods and learning to click the buttons on the test runner GUI. If you don’t have the time to take it seriously and treat your test code as a first-class citizen, it’s probably not going to go particularly well.</p>

<h2 id="the-bad-news">The Bad News</h2>
<p>If you do it badly on a large scale, here’s a list of just <em>some</em> of the issues you can encounter:</p>

<ul>
  <li>The tests do nothing to prove that your software functions correctly</li>
  <li>The tests only prove that the ‘happy path’ works – unexpected data causes failures in production</li>
  <li>Some tests are not deterministic (they will periodically fail)</li>
  <li>Developers do not trust the tests. Test failures are routinely ignored</li>
  <li>Tests can have side-effects (so running test 3 after test 10 could cause a failure, but not vice-versa)</li>
  <li>Developers don’t understand what certain tests are trying to prove</li>
  <li>Even if developers understand the purpose of a test, it’s time-consuming to debug a failure as the test code is too convoluted</li>
  <li>The tests run extremely slowly, retarding productivity</li>
  <li>The tests routinely break (fail to compile or don’t pass when executed) when minor changes are made to production code. Developers throw their hands in the air and delete the tests rather than fix them.</li>
  <li>Developers cannot test swathes of production code, as it has intractable, unbreakable dependencies</li>
  <li>Developers tend to repeat huge amounts of code when writing tests.</li>
  <li>Tests pass when the production code is broken, as the test code apes the class under test.</li>
  <li>Tests pass regardless of the implementation being correct. I.e. the test is bugged, usually due to (incorrectly) performing calculations in the test code itself.</li>
</ul>

<h2 id="the-good-news">The Good News</h2>
<p>The vast majority of these problems can be tamed by applying a handful of principles, which I will outline in further posts.</p>

        
      </section>

      <footer class="page__meta">
        
        
  


  
  
  

  <p class="page__taxonomy">
    <strong><i class="fas fa-fw fa-tags" aria-hidden="true"></i> Tags: </strong>
    <span itemprop="keywords">
    
      
      
      <a href="/blog/tags/fundamentals-of-unit-testing" class="page__taxonomy-item" rel="tag">fundamentals of unit testing</a><span class="sep">, </span>
    
      
      
      <a href="/blog/tags/testing" class="page__taxonomy-item" rel="tag">testing</a><span class="sep">, </span>
    
      
      
      <a href="/blog/tags/tips" class="page__taxonomy-item" rel="tag">tips</a>
    
    </span>
  </p>




        
  <p class="page__date"><strong><i class="fas fa-fw fa-calendar-alt" aria-hidden="true"></i> Updated:</strong> <time datetime="2012-10-24T02:00:04+00:00">October 24, 2012</time></p>


      </footer>

      <section class="page__share">
  

  <a href="https://twitter.com/intent/tweet?text=The+fundamentals+of+unit+testing%3A+It%27s+a+skill%20https%3A%2F%2Fmarksimpson82.github.io%2Fblog%2F2012%2F10%2F24%2Fthe-fundamentals-of-automated-testing-its-a-skill.html" class="btn btn--twitter" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Twitter"><i class="fab fa-fw fa-twitter" aria-hidden="true"></i><span> Twitter</span></a>

  <a href="https://www.facebook.com/sharer/sharer.php?u=https%3A%2F%2Fmarksimpson82.github.io%2Fblog%2F2012%2F10%2F24%2Fthe-fundamentals-of-automated-testing-its-a-skill.html" class="btn btn--facebook" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on Facebook"><i class="fab fa-fw fa-facebook" aria-hidden="true"></i><span> Facebook</span></a>

  <a href="https://www.linkedin.com/shareArticle?mini=true&url=https%3A%2F%2Fmarksimpson82.github.io%2Fblog%2F2012%2F10%2F24%2Fthe-fundamentals-of-automated-testing-its-a-skill.html" class="btn btn--linkedin" onclick="window.open(this.href, 'window', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;" title="Share on LinkedIn"><i class="fab fa-fw fa-linkedin" aria-hidden="true"></i><span> LinkedIn</span></a>
</section>


      
  <nav class="pagination">
    
      <a href="/blog/2012/10/24/the-fundamentals-of-automated-testing-series.html" class="pagination--pager" title="The fundamentals of unit testing (series)
">Previous</a>
    
    
      <a href="/blog/2012/10/25/the-fundamentals-of-automated-testing-narrow-focused.html" class="pagination--pager" title="The fundamentals of unit testing: Narrow &amp; Focused
">Next</a>
    
  </nav>

    </div>

    
  </article>

  
  
    <div class="page__related">
      <h4 class="page__related-title">You May Also Enjoy</h4>
      <div class="grid__wrapper">
        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/blog/2020/08/10/the-fundamentals-of-automated-testing-setup-structure.html" rel="permalink">The fundamentals of unit testing: Setup structure
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  6 minute read

</p>
    
    <p class="archive__item-excerpt" itemprop="description">This post is part of a series on unit testing.
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/blog/2020/08/05/the-fundamentals-of-automated-testing-data-driven-tests.html" rel="permalink">The fundamentals of unit testing: Data-driven tests
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  2 minute read

</p>
    
    <p class="archive__item-excerpt" itemprop="description">This post is part of a series on unit testing.
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/blog/2020/08/02/goodbye-wordpress-hello-jekyll-and-github-pages.html" rel="permalink">Goodbye Wordpress, Hello Jekyll and Github Pages
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  8 minute read

</p>
    
    <p class="archive__item-excerpt" itemprop="description">I’ve been using Wordpress with 34sp.com hosting since the late noughties, and it’s time for a 
change.
</p>
  </article>
</div>

        
          



<div class="grid__item">
  <article class="archive__item" itemscope itemtype="https://schema.org/CreativeWork">
    
    <h2 class="archive__item-title" itemprop="headline">
      
        <a href="/blog/2020/03/29/nvidia-g-sync-black-screen-when-alt-tabbing.html" rel="permalink">Nvidia + G-SYNC - Black screen when alt-tabbing
</a>
      
    </h2>
    
      <p class="page__meta"><i class="far fa-clock" aria-hidden="true"></i> 




  1 minute read

</p>
    
    <p class="archive__item-excerpt" itemprop="description">tl;dr: It seems G-SYNC related. I fixed it by installing the monitor driver, then toggling G-SYNC on/off.
</p>
  </article>
</div>

        
      </div>
    </div>
  
  
</div>

    </div>

    

    <div id="footer" class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        <div class="page__footer-follow">
  <ul class="social-icons">
    

    
      
        
      
        
      
        
      
        
      
        
      
        
      
    

    <li><a href="/blog/feed.xml"><i class="fas fa-fw fa-rss-square" aria-hidden="true"></i> Feed</a></li>
  </ul>
</div>

<div class="page__footer-copyright">&copy; 2021 Mark's Devblog. Powered by <a href="https://jekyllrb.com" rel="nofollow">Jekyll</a> &amp; <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a>.</div>

      </footer>
    </div>

    
  <script src="/blog/assets/js/main.min.js"></script>
  <script src="https://kit.fontawesome.com/4eee35f757.js"></script>










  </body>
</html>
